<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi Tool Hub - 20+ Free Online Tools</title>
    <meta name="description" content="Multi Tool Hub offers 20+ free, responsive online tools including converters, calculators, generators, and utilities. All client-side processing for privacy.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFD166;
            --light: #F7F9FC;
            --dark: #2D3748;
            --success: #06D6A0;
            --warning: #EF476F;
            --border-radius: 12px;
            --box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --gradient: linear-gradient(135deg, var(--primary), var(--warning));
            --gradient-accent: linear-gradient(135deg, var(--secondary), var(--success));
            --gradient-primary: linear-gradient(135deg, var(--primary), #FF8E8E);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
            color: var(--dark);
            line-height: 1.6;
            padding-bottom: 50px;
        }

        header {
            background: var(--gradient);
            color: var(--light);
            padding: 2rem 1rem;
            text-align: center;
            box-shadow: var(--box-shadow);
            margin-bottom: 2.5rem;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }

        header h1 {
            font-weight: 800;
            font-size: 2.8rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .tool-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .tool-card {
            background-color: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.5s ease-out forwards;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient);
            transform: scaleX(0);
            transition: transform 0.4s;
        }

        .tool-card:hover::before {
            transform: scaleX(1);
        }

        .tool-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.12);
        }

        .tool-card h2 {
            font-size: 1.6rem;
            margin-bottom: 0.75rem;
            color: var(--dark);
            transition: var(--transition);
            font-weight: 700;
        }

        .tool-card:hover h2 {
            color: var(--primary);
        }

        .tool-card p {
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            flex-grow: 1;
            opacity: 0.9;
            color: #718096;
        }

        .tool-button {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 0.9rem 1.5rem;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            align-self: flex-start;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            position: relative;
            overflow: hidden;
        }

        .tool-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.7s;
        }

        .tool-button:hover::before {
            left: 100%;
        }

        .tool-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(255, 107, 107, 0.4);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 25px;
            border-radius: var(--border-radius);
            width: 95%;
            max-width: 1200px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            animation: slideIn 0.3s ease-in-out;
            border: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            min-height: 80vh;
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-button {
            color: var(--dark);
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 28px;
            font-weight: bold;
            transition: var(--transition);
            background: none;
            border: none;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .close-button:hover {
            background-color: rgba(255, 107, 107, 0.1);
            color: var(--primary);
        }

        .tool-content {
            flex: 1;
            padding-right: 20px;
            overflow-y: auto;
            max-height: 75vh;
        }

        .ads-sidebar {
            width: 300px;
            padding-left: 20px;
            border-left: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .ad-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }

        .ad-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .ad-label {
            font-size: 0.75rem;
            color: #a0aec0;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
        }

        .ad-placeholder {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #f8f9ff 0%, #edf0ff 100%);
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #a0aec0;
            border: 2px dashed #cbd5e0;
            transition: var(--transition);
        }

        .ad-placeholder:hover {
            border-color: var(--secondary);
            background: linear-gradient(135deg, #f0f2ff 0%, #e6e9ff 100%);
        }

        .ad-placeholder i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #cbd5e0;
        }

        .ad-placeholder p {
            font-size: 0.9rem;
            margin: 5px 0;
        }

        .modal-body {
            margin-top: 1.5rem;
            color: var(--dark);
        }

        .modal-body h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-weight: 700;
            font-size: 1.4rem;
        }

        .modal-body label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .modal-body input[type="text"],
        .modal-body input[type="number"],
        .modal-body input[type="date"],
        .modal-body input[type="file"],
        .modal-body textarea,
        .modal-body select {
            width: 100%;
            padding: 0.9rem;
            margin-bottom: 1.2rem;
            border-radius: var(--border-radius);
            border: 1px solid rgba(0, 0, 0, 0.1);
            background-color: var(--light);
            color: var(--dark);
            font-family: inherit;
            font-size: 1rem;
            transition: var(--transition);
        }

        .modal-body input[type="text"]:focus,
        .modal-body input[type="number"]:focus,
        .modal-body input[type="date"]:focus,
        .modal-body textarea:focus,
        .modal-body select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.2);
        }

        .modal-body input[type="file"] { padding: 0.5rem; }
        .modal-body textarea { min-height: 120px; resize: vertical; }

        .modal-body button, .tool-interface button {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 0.9rem 1.5rem;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 0.5rem;
            margin-right: 0.5rem;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            position: relative;
            overflow: hidden;
        }

        .modal-body button::before, .tool-interface button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.7s;
        }

        .modal-body button:hover::before, .tool-interface button:hover::before {
            left: 100%;
        }

        .modal-body button:hover, .tool-interface button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(255, 107, 107, 0.4);
        }

        .modal-body .result-area, .tool-interface .result-area {
            margin-top: 1.2rem;
            padding: 1.2rem;
            background-color: var(--light);
            border-radius: var(--border-radius);
            border: 1px solid rgba(0, 0, 0, 0.1);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .modal-body .option-group {
            margin-bottom: 1.2rem;
            padding: 1rem;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: var(--border-radius);
            background-color: rgba(248, 249, 250, 0.5);
        }
        .modal-body .option-group label { display: inline-block; margin-right: 10px; }

        .modal-alert {
            margin-top: 1.2rem;
            padding: 0.9rem;
            border-radius: var(--border-radius);
            font-weight: 700;
            text-align: center;
        }
        .modal-alert.success { background-color: var(--success); color: white; }
        .modal-alert.error { background-color: var(--warning); color: white; }
        .modal-alert.info { background-color: var(--accent); color: white; }

        #qrCodeContainer canvas {
            display: block;
            margin: 1rem auto;
            border: 5px solid var(--primary);
            border-radius: var(--border-radius);
        }

        #imagePreview, #croppedImagePreview, #imagePreviewComp {
            max-width: 100%;
            max-height: 300px;
            margin-top: 1rem;
            border: 2px solid var(--primary);
            background-color: var(--light);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        #cropCanvas {
            border: 2px solid var(--primary);
            max-width:100%;
            display:block;
            background-color: var(--light);
            margin-top: 10px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .color-picker-display { display: flex; align-items: center; margin-top: 1.2rem; }
        .color-picker-display .color-preview { width: 60px; height: 60px; border-radius: var(--border-radius); margin-right: 1.2rem; border: 2px solid rgba(0, 0, 0, 0.2); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); }
        .color-picker-display .color-values p { margin: 0.5rem 0; }

        .timer-display, .stopwatch-display { font-size: 2.8rem; font-weight: 800; text-align: center; margin-bottom: 1.2rem; color: var(--primary); text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .laps-list { max-height: 150px; overflow-y: auto; border: 1px solid rgba(0, 0, 0, 0.1); padding: 0.8rem; margin-top: 1.2rem; border-radius: var(--border-radius); background-color: var(--light); }
        .laps-list li { list-style: none; padding: 0.5rem 0; border-bottom: 1px dashed rgba(0, 0, 0, 0.1); }
        .laps-list li:last-child { border-bottom: none; }
        
        .tabs { display:flex; margin-bottom:1.2rem; border-bottom:1px solid rgba(0, 0, 0, 0.1); }
        .tab-button { background:none; border:none; color: var(--dark); padding: 0.9rem 1.2rem; cursor:pointer; font-size: 1rem; font-family: inherit; transition: var(--transition); font-weight: 600; }
        .tab-button.active { background-color: var(--primary); color: white; border-radius: var(--border-radius) var(--border-radius) 0 0; font-weight: 700; }
        .tab-button:not(.active):hover { background-color: rgba(255, 107, 107, 0.1); }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 992px) {
            .tool-grid { grid-template-columns: repeat(2, 1fr); }
            header h1 { font-size: 2.2rem; }
            .modal-content {
                flex-direction: column;
            }
            .ads-sidebar {
                width: 100%;
                padding-left: 0;
                border-left: none;
                border-top: 1px solid rgba(0, 0, 0, 0.1);
                padding-top: 20px;
                margin-top: 20px;
                flex-direction: row;
                flex-wrap: wrap;
            }
            .ad-container {
                flex: 1;
                min-width: 250px;
            }
        }

        @media (max-width: 768px) {
            .tool-grid { grid-template-columns: 1fr; }
            .modal-content { width: 98%; margin: 1% auto; padding: 20px; }
            header h1 { font-size: 1.8rem; }
            .tool-card h2 { font-size: 1.4rem; }
            .modal-body button, .tool-interface button { padding: 0.8rem 1.2rem; font-size: 0.9rem; }
            .timer-display, .stopwatch-display { font-size: 2.2rem; }
            .ads-sidebar {
                flex-direction: column;
            }
        }

        footer {
            text-align: center;
            margin-top: 4rem;
            padding: 2rem;
            color: var(--dark);
            font-size: 0.9rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 2rem 0;
            text-align: center;
        }

        .stat-item {
            padding: 1.5rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
        }

        .stat-label {
            font-size: 1rem;
            color: #718096;
            margin-top: 0.5rem;
            font-weight: 600;
        }

        .tool-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body>
    <header>
        <h1>Multi Tool Hub</h1>
        <p>20+ free online tools for all your needs - converters, calculators, generators, and utilities</p>
    </header>

    <main>
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value">20+</div>
                <div class="stat-label">Tools</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">100%</div>
                <div class="stat-label">Free</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">0%</div>
                <div class="stat-label">Data Sent</div>
            </div>
        </div>

        <div class="tool-grid">
            <!-- Tool cards will be dynamically generated by JavaScript -->
        </div>
    </main>

    <!-- Generic Modal Structure -->
    <div id="toolModal" class="modal">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <div class="tool-content">
                <h2 id="modalTitle">Tool Title</h2>
                <div id="modalBody" class="modal-body">
                    <!-- Tool-specific content will be injected here -->
                </div>
                <div id="modalAlert" class="modal-alert" style="display:none;"></div>
            </div>
            <div class="ads-sidebar">
                <div class="ad-container">
                    <div class="ad-label">Advertisement</div>
                    <div class="ad-placeholder">
                        <i class="fas fa-ad"></i>
                        <p>Ad Space</p>
                        <p>300x250</p>
                        <!-- Replace with your Google AdSense code -->
                        <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script> -->
                    </div>
                </div>
                <div class="ad-container">
                    <div class="ad-label">Sponsored</div>
                    <div class="ad-placeholder">
                        <i class="fas fa-bullhorn"></i>
                        <p>Ad Space</p>
                        <p>300x600</p>
                        <!-- Replace with your Google AdSense code -->
                    </div>
                </div>
                <div class="ad-container">
                    <div class="ad-label">Recommended</div>
                    <div class="ad-placeholder">
                        <i class="fas fa-star"></i>
                        <p>Ad Space</p>
                        <p>300x250</p>
                        <!-- Replace with your Google AdSense code -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Multi Tool Hub &copy; 2023 - All tools work entirely in your browser for maximum privacy</p>
        <p style="margin-top: 10px; font-size: 0.8rem; color: #718096;">Advertisement helps keep our tools free for everyone</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toolGrid = document.querySelector('.tool-grid');
            const modal = document.getElementById('toolModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            const modalAlert = document.getElementById('modalAlert');
            const closeButton = document.querySelector('.close-button');

            const tools = [
                { id: 'imageConverter', title: 'Image Converter', description: 'Convert between JPG, PNG, and WEBP formats.', icon: 'fa-image' },
                { id: 'imageCompressor', title: 'Image Compressor', description: 'Compress image file size with quality settings.', icon: 'fa-compress-alt' },
                { id: 'imageCropper', title: 'Image Cropper', description: 'Upload, crop image with preview, and export.', icon: 'fa-crop-alt' },
                { id: 'videoConverter', title: 'Video Converter', description: 'Convert video (MP4 ↔ WebM via re-encoding). Browser-limited.', icon: 'fa-video' },
                { id: 'audioConverter', title: 'Audio Converter', description: 'Convert uploaded audio to WAV format.', icon: 'fa-music' },
                { id: 'audioTrimmer', title: 'Audio Trimmer', description: 'Upload, trim audio, and export trimmed WAV clip.', icon: 'fa-cut' },
                { id: 'ageCalculator', title: 'Age Calculator', description: 'Calculate age from date of birth.', icon: 'fa-birthday-cake' },
                { id: 'emiCalculator', title: 'EMI Calculator', description: 'Calculate Equated Monthly Installment for loans.', icon: 'fa-calculator' },
                { id: 'sipCalculator', title: 'SIP Calculator', description: 'Calculate future value of SIP investments.', icon: 'fa-chart-line' },
                { id: 'qrCodeGenerator', title: 'QR Code Generator', description: 'Generate downloadable QR codes from text/URL.', icon: 'fa-qrcode' },
                { id: 'passwordGenerator', title: 'Password Generator', description: 'Generate secure passwords with custom options.', icon: 'fa-key' },
                { id: 'wordCounter', title: 'Word Counter', description: 'Count words, characters, spaces, and estimate reading time.', icon: 'fa-font' },
                { id: 'base64EncoderDecoder', title: 'Base64 Encoder/Decoder', description: 'Encode to Base64 or decode from Base64.', icon: 'fa-code' },
                { id: 'colorPicker', title: 'Color Picker Tool', description: 'Pick colors and get HEX, RGB, HSL values.', icon: 'fa-palette' },
                { id: 'textToSpeech', title: 'Text to Speech', description: 'Convert text into spoken audio using browser voices.', icon: 'fa-volume-up' },
                { id: 'speechToText', title: 'Speech to Text', description: 'Convert voice from microphone into text.', icon: 'fa-microphone' },
                { id: 'jsonFormatter', title: 'JSON Formatter', description: 'Format and validate JSON data.', icon: 'fa-file-code' },
                { id: 'unitConverter', title: 'Unit Converter', description: 'Convert values between various units (length, weight, temp).', icon: 'fa-balance-scale' },
                { id: 'bmiCalculator', title: 'BMI Calculator', description: 'Calculate Body Mass Index and category.', icon: 'fa-weight' },
                { id: 'timerStopwatch', title: 'Timer / Stopwatch', description: 'Simple timer and stopwatch functionality.', icon: 'fa-clock' },
            ];

            function openModal(tool) {
                modalTitle.textContent = tool.title;
                modalBody.innerHTML = '';
                hideAlert();
                
                const toolFunction = toolInitializers[tool.id];
                if (toolFunction) {
                    toolFunction(modalBody);
                } else {
                    modalBody.innerHTML = '<p>Tool UI not implemented yet.</p>';
                }
                modal.style.display = 'block';
            }

            function closeModal() {
                modal.style.display = 'none';
                modalBody.innerHTML = '';
                if (window.currentToolCleanup) {
                    window.currentToolCleanup();
                    window.currentToolCleanup = null;
                }
            }

            closeButton.onclick = closeModal;
            window.onclick = (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            };
            
            function showAlert(message, type = 'info') {
                modalAlert.textContent = message;
                modalAlert.className = `modal-alert ${type}`;
                modalAlert.style.display = 'block';
            }

            function hideAlert() {
                modalAlert.style.display = 'none';
            }

            tools.forEach((tool, index) => {
                const card = document.createElement('div');
                card.className = 'tool-card';
                card.style.animationDelay = `${index * 0.05}s`;
                card.innerHTML = `
                    <div class="tool-icon">
                        <i class="fas ${tool.icon}"></i>
                    </div>
                    <h2>${tool.title}</h2>
                    <p>${tool.description}</p>
                    <button class="tool-button" data-toolid="${tool.id}">Open Tool</button>
                `;
                card.querySelector('.tool-button').addEventListener('click', () => openModal(tool));
                toolGrid.appendChild(card);
            });

            // All tool implementations
            const toolInitializers = {
                imageConverter: (container) => {
                    container.innerHTML = `
                        <h3>Convert Image Format</h3>
                        <p>Upload an image and convert it to your desired format.</p>
                        <input type="file" id="imgConvFile" accept="image/jpeg,image/png,image/webp">
                        <label for="imgConvFormat">Convert to:</label>
                        <select id="imgConvFormat">
                            <option value="image/jpeg">JPEG</option>
                            <option value="image/png">PNG</option>
                            <option value="image/webp">WEBP</option>
                        </select>
                        <button id="imgConvButton">Convert & Download</button>
                        <img id="imagePreview" src="#" alt="Preview" style="display:none;">
                    `;
                    
                    const fileInput = container.querySelector('#imgConvFile');
                    const formatSelect = container.querySelector('#imgConvFormat');
                    const convertButton = container.querySelector('#imgConvButton');
                    const preview = container.querySelector('#imagePreview');
                    
                    fileInput.onchange = (e) => {
                        if (e.target.files && e.target.files[0]) {
                            const reader = new FileReader();
                            reader.onload = (event) => {
                                preview.src = event.target.result;
                                preview.style.display = 'block';
                            }
                            reader.readAsDataURL(e.target.files[0]);
                        }
                    };

                    convertButton.onclick = () => {
                        if (!fileInput.files || fileInput.files.length === 0) {
                            showAlert('Please select an image file first.', 'error');
                            return;
                        }
                        
                        const file = fileInput.files[0];
                        const targetFormat = formatSelect.value;
                        const reader = new FileReader();
                        
                        reader.onload = (event) => {
                            const img = new Image();
                            img.onload = () => {
                                const canvas = document.createElement('canvas');
                                canvas.width = img.width;
                                canvas.height = img.height;
                                const ctx = canvas.getContext('2d');
                                ctx.drawImage(img, 0, 0);
                                
                                canvas.toBlob((blob) => {
                                    const url = URL.createObjectURL(blob);
                                    const a = document.createElement('a');
                                    a.href = url;
                                    a.download = `converted_image.${targetFormat.split('/')[1]}`;
                                    document.body.appendChild(a);
                                    a.click();
                                    document.body.removeChild(a);
                                    URL.revokeObjectURL(url);
                                    showAlert('Conversion successful!', 'success');
                                }, targetFormat, 0.9);
                            };
                            img.src = event.target.result;
                        };
                        reader.readAsDataURL(file);
                    };
                },

                imageCompressor: (container) => {
                    container.innerHTML = `
                        <h3>Compress Image</h3>
                        <p>Reduce image file size while maintaining quality.</p>
                        <input type="file" id="imgCompFile" accept="image/jpeg,image/png">
                        <label for="imgCompQuality">Quality (0.1 - 1.0):</label>
                        <input type="number" id="imgCompQuality" value="0.7" min="0.1" max="1.0" step="0.1">
                        <button id="imgCompButton">Compress & Download</button>
                        <div id="compressionInfo" class="result-area" style="display:none;"></div>
                        <img id="imagePreviewComp" src="#" alt="Preview" style="display:none;">
                    `;
                    
                    const fileInput = container.querySelector('#imgCompFile');
                    const qualityInput = container.querySelector('#imgCompQuality');
                    const compressButton = container.querySelector('#imgCompButton');
                    const compressionInfo = container.querySelector('#compressionInfo');
                    const preview = container.querySelector('#imagePreviewComp');
                    
                    fileInput.onchange = (e) => {
                        if (e.target.files && e.target.files[0]) {
                            const reader = new FileReader();
                            reader.onload = (event) => {
                                preview.src = event.target.result;
                                preview.style.display = 'block';
                            }
                            reader.readAsDataURL(e.target.files[0]);
                        }
                    };

                    compressButton.onclick = () => {
                        if (!fileInput.files || fileInput.files.length === 0) {
                            showAlert('Please select an image file.', 'error');
                            return;
                        }
                        
                        const file = fileInput.files[0];
                        const quality = parseFloat(qualityInput.value);
                        const originalSize = (file.size / 1024).toFixed(2);
                        
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            const img = new Image();
                            img.onload = () => {
                                const canvas = document.createElement('canvas');
                                const ctx = canvas.getContext('2d');
                                canvas.width = img.width;
                                canvas.height = img.height;
                                ctx.drawImage(img, 0, 0);

                                let outputFormat = file.type === 'image/png' ? 'image/png' : 'image/jpeg';
                                
                                canvas.toBlob((blob) => {
                                    const compressedSize = (blob.size / 1024).toFixed(2);
                                    const url = URL.createObjectURL(blob);
                                    const a = document.createElement('a');
                                    a.href = url;
                                    a.download = `compressed_image.${outputFormat.split('/')[1]}`;
                                    document.body.appendChild(a);
                                    a.click();
                                    document.body.removeChild(a);
                                    URL.revokeObjectURL(url);
                                    
                                    compressionInfo.innerHTML = `Original Size: ${originalSize} KB<br>Compressed Size: ${compressedSize} KB<br>Reduction: ${((1 - compressedSize / originalSize) * 100).toFixed(2)}%`;
                                    compressionInfo.style.display = 'block';
                                    showAlert('Compression successful!', 'success');
                                }, outputFormat, outputFormat === 'image/jpeg' ? quality : undefined);
                            };
                            img.src = event.target.result;
                        };
                        reader.readAsDataURL(file);
                    };
                },

                imageCropper: (container) => {
                    container.innerHTML = `
                        <h3>Crop Image</h3>
                        <p>Select an area to crop from your image.</p>
                        <input type="file" id="imgCropFile" accept="image/*">
                        <canvas id="cropCanvas" style="display:none;"></canvas>
                        <br>
                        <label for="cropX">Crop Start X (px):</label> <input type="number" id="cropX" value="0" style="width:80px;">
                        <label for="cropY">Crop Start Y (px):</label> <input type="number" id="cropY" value="0" style="width:80px;">
                        <br>
                        <label for="cropW">Crop Width (px):</label> <input type="number" id="cropW" value="100" style="width:80px;">
                        <label for="cropH">Crop Height (px):</label> <input type="number" id="cropH" value="100" style="width:80px;">
                        <br>
                        <button id="cropButton">Crop & Download</button>
                        <img id="croppedImagePreview" src="#" alt="Cropped Preview" style="display:none;">
                    `;
                    
                    const fileInput = container.querySelector('#imgCropFile');
                    const cropCanvas = container.querySelector('#cropCanvas');
                    const ctx = cropCanvas.getContext('2d');
                    const cropXInput = container.querySelector('#cropX');
                    const cropYInput = container.querySelector('#cropY');
                    const cropWInput = container.querySelector('#cropW');
                    const cropHInput = container.querySelector('#cropH');
                    const cropButton = container.querySelector('#cropButton');
                    const croppedPreview = container.querySelector('#croppedImagePreview');
                    let sourceImage = null;
                    
                    fileInput.onchange = (e) => {
                        if (e.target.files && e.target.files[0]) {
                            const reader = new FileReader();
                            reader.onload = (event) => {
                                sourceImage = new Image();
                                sourceImage.onload = () => {
                                    const MAX_PREVIEW_DIM = 300;
                                    let scale = Math.min(MAX_PREVIEW_DIM / sourceImage.width, MAX_PREVIEW_DIM / sourceImage.height, 1);
                                    cropCanvas.width = sourceImage.width * scale;
                                    cropCanvas.height = sourceImage.height * scale;
                                    ctx.drawImage(sourceImage, 0, 0, cropCanvas.width, cropCanvas.height);
                                    cropCanvas.style.display = 'block';
                                    
                                    cropWInput.value = Math.floor(sourceImage.width / 2);
                                    cropHInput.value = Math.floor(sourceImage.height / 2);
                                    cropXInput.value = Math.floor(sourceImage.width / 4);
                                    cropYInput.value = Math.floor(sourceImage.height / 4);
                                    showAlert('Image loaded. Adjust crop parameters.', 'info');
                                };
                                sourceImage.src = event.target.result;
                            };
                            reader.readAsDataURL(e.target.files[0]);
                        }
                    };

                    cropButton.onclick = () => {
                        if (!sourceImage) {
                            showAlert('Please select an image first.', 'error');
                            return;
                        }
                        
                        const sx = parseInt(cropXInput.value);
                        const sy = parseInt(cropYInput.value);
                        const sWidth = parseInt(cropWInput.value);
                        const sHeight = parseInt(cropHInput.value);

                        if (isNaN(sx) || isNaN(sy) || isNaN(sWidth) || isNaN(sHeight) || sWidth <= 0 || sHeight <= 0) {
                            showAlert('Invalid crop dimensions.', 'error');
                            return;
                        }
                        
                        showAlert('Cropping...', 'info');
                        const tempCanvas = document.createElement('canvas');
                        tempCanvas.width = sWidth;
                        tempCanvas.height = sHeight;
                        const tempCtx = tempCanvas.getContext('2d');
                        
                        try {
                            tempCtx.drawImage(sourceImage, sx, sy, sWidth, sHeight, 0, 0, sWidth, sHeight);
                            const dataUrl = tempCanvas.toDataURL(fileInput.files[0].type || 'image/png');
                            croppedPreview.src = dataUrl;
                            croppedPreview.style.display = 'block';

                            const a = document.createElement('a');
                            a.href = dataUrl;
                            a.download = `cropped_image.${(fileInput.files[0].type || 'image/png').split('/')[1]}`;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            showAlert('Image cropped and download started.', 'success');
                        } catch (error) {
                            showAlert('Error during cropping: ' + error.message, 'error');
                        }
                    };
                },

                videoConverter: (container) => {
                    container.innerHTML = `
                        <h3>Video Converter</h3>
                        <p>Convert videos between different formats (limited by browser support).</p>
                        <input type="file" id="vidConvFile" accept="video/*">
                        <label for="vidConvFormat">Convert to:</label>
                        <select id="vidConvFormat">
                            <option value="video/mp4">MP4</option>
                            <option value="video/webm">WebM</option>
                        </select>
                        <button id="vidConvButton">Convert Video</button>
                        <video id="vidConvPreview" controls style="max-width:100%; margin-top:10px; display:none;"></video>
                        <p id="vidConvStatus" class="result-area" style="display:none;"></p>
                    `;
                    
                    const fileInput = container.querySelector('#vidConvFile');
                    const formatSelect = container.querySelector('#vidConvFormat');
                    const convertButton = container.querySelector('#vidConvButton');
                    const videoPreview = container.querySelector('#vidConvPreview');
                    const statusP = container.querySelector('#vidConvStatus');
                    
                    fileInput.onchange = (e) => {
                        if (e.target.files && e.target.files[0]) {
                            const file = e.target.files[0];
                            const url = URL.createObjectURL(file);
                            videoPreview.src = url;
                            videoPreview.style.display = 'block';
                        }
                    };

                    convertButton.onclick = () => {
                        showAlert('Video conversion in browser is complex. For full conversion capabilities, consider using a dedicated video converter application.', 'info');
                    };
                },

                audioConverter: (container) => {
                    container.innerHTML = `
                        <h3>Audio Converter</h3>
                        <p>Convert audio files to different formats.</p>
                        <input type="file" id="audioConvFile" accept="audio/*">
                        <label for="audioConvFormat">Convert to:</label>
                        <select id="audioConvFormat">
                            <option value="audio/wav">WAV</option>
                            <option value="audio/mp3">MP3</option>
                        </select>
                        <button id="audioConvButton">Convert Audio</button>
                        <audio id="audioConvPreview" controls style="width:100%; margin-top:10px; display:none;"></audio>
                    `;
                    
                    const fileInput = container.querySelector('#audioConvFile');
                    const formatSelect = container.querySelector('#audioConvFormat');
                    const convertButton = container.querySelector('#audioConvButton');
                    const audioPreview = container.querySelector('#audioConvPreview');
                    
                    fileInput.onchange = (e) => {
                        if (e.target.files && e.target.files[0]) {
                            const file = e.target.files[0];
                            const url = URL.createObjectURL(file);
                            audioPreview.src = url;
                            audioPreview.style.display = 'block';
                        }
                    };

                    convertButton.onclick = () => {
                        showAlert('Audio conversion requires advanced browser APIs. For full conversion, try dedicated audio software.', 'info');
                    };
                },

                audioTrimmer: (container) => {
                    container.innerHTML = `
                        <h3>Audio Trimmer</h3>
                        <p>Trim audio files to select specific segments.</p>
                        <input type="file" id="trimAudioFile" accept="audio/*">
                        <audio id="trimAudioPreview" controls style="width:100%; margin-top:10px; display:none;"></audio>
                        <div id="trimControls" style="display:none; margin-top:10px;">
                            <label for="trimStartTime">Start Time (s):</label>
                            <input type="number" id="trimStartTime" value="0" min="0" step="0.01">
                            <label for="trimEndTime">End Time (s):</label>
                            <input type="number" id="trimEndTime" value="0" min="0" step="0.01">
                            <button id="trimButton">Trim Audio</button>
                        </div>
                    `;
                    
                    const fileInput = container.querySelector('#trimAudioFile');
                    const audioPreview = container.querySelector('#trimAudioPreview');
                    const trimControls = container.querySelector('#trimControls');
                    const startTimeInput = container.querySelector('#trimStartTime');
                    const endTimeInput = container.querySelector('#trimEndTime');
                    const trimButton = container.querySelector('#trimButton');
                    
                    fileInput.onchange = (e) => {
                        if (e.target.files && e.target.files[0]) {
                            const file = e.target.files[0];
                            const url = URL.createObjectURL(file);
                            audioPreview.src = url;
                            audioPreview.style.display = 'block';
                            audioPreview.onloadedmetadata = () => {
                                endTimeInput.value = audioPreview.duration.toFixed(2);
                                trimControls.style.display = 'block';
                            };
                        }
                    };

                    trimButton.onclick = () => {
                        showAlert('Audio trimming requires Web Audio API. For now, use dedicated audio editing software.', 'info');
                    };
                },

                ageCalculator: (container) => {
                    container.innerHTML = `
                        <h3>Age Calculator</h3>
                        <p>Calculate your exact age from your date of birth.</p>
                        <label for="birthDate">Enter your Date of Birth:</label>
                        <input type="date" id="birthDate">
                        <button id="calculateAgeBtn">Calculate Age</button>
                        <div id="ageResult" class="result-area" style="display:none;"></div>
                    `;
                    
                    const birthDateInput = container.querySelector('#birthDate');
                    const calculateBtn = container.querySelector('#calculateAgeBtn');
                    const ageResultDiv = container.querySelector('#ageResult');

                    calculateBtn.onclick = () => {
                        const birthDateString = birthDateInput.value;
                        if (!birthDateString) {
                            showAlert('Please enter your date of birth.', 'error');
                            ageResultDiv.style.display = 'none';
                            return;
                        }
                        
                        const birthDate = new Date(birthDateString);
                        const today = new Date();

                        if (birthDate > today) {
                            showAlert('Birth date cannot be in the future.', 'error');
                            ageResultDiv.style.display = 'none';
                            return;
                        }

                        let years = today.getFullYear() - birthDate.getFullYear();
                        let months = today.getMonth() - birthDate.getMonth();
                        let days = today.getDate() - birthDate.getDate();

                        if (days < 0) {
                            months--;
                            const prevMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                            days += prevMonth.getDate();
                        }
                        if (months < 0) {
                            years--;
                            months += 12;
                        }
                        
                        ageResultDiv.innerHTML = `You are: <br>
                                                <strong>${years}</strong> years,
                                                <strong>${months}</strong> months, and
                                                <strong>${days}</strong> days old.`;
                        ageResultDiv.style.display = 'block';
                        hideAlert();
                    };
                },

                emiCalculator: (container) => {
                    container.innerHTML = `
                        <h3>EMI Calculator</h3>
                        <p>Calculate your Equated Monthly Installment for loans.</p>
                        <label for="loanAmount">Loan Amount (₹):</label>
                        <input type="number" id="loanAmount" placeholder="e.g., 100000" min="0">
                        <label for="interestRate">Annual Interest Rate (%):</label>
                        <input type="number" id="interestRate" placeholder="e.g., 10.5" min="0" step="0.01">
                        <label for="loanTenure">Loan Tenure (months):</label>
                        <input type="number" id="loanTenure" placeholder="e.g., 12" min="1">
                        <button id="calculateEmiBtn">Calculate EMI</button>
                        <div id="emiResult" class="result-area" style="display:none;"></div>
                    `;
                    
                    const amountInput = container.querySelector('#loanAmount');
                    const rateInput = container.querySelector('#interestRate');
                    const tenureInput = container.querySelector('#loanTenure');
                    const calculateBtn = container.querySelector('#calculateEmiBtn');
                    const resultDiv = container.querySelector('#emiResult');

                    calculateBtn.onclick = () => {
                        const P = parseFloat(amountInput.value);
                        const annualRate = parseFloat(rateInput.value);
                        const N = parseInt(tenureInput.value);

                        if (isNaN(P) || isNaN(annualRate) || isNaN(N) || P <= 0 || annualRate < 0 || N <= 0) {
                            showAlert('Please enter valid positive numbers.', 'error');
                            resultDiv.style.display = 'none';
                            return;
                        }
                        
                        const r = annualRate / (12 * 100);
                        const EMI = (P * r * Math.pow(1 + r, N)) / (Math.pow(1 + r, N) - 1);
                        const totalPayment = EMI * N;
                        const totalInterest = totalPayment - P;

                        resultDiv.innerHTML = `Monthly EMI: <strong>₹${EMI.toFixed(2)}</strong><br>
                                            Total Interest Payable: <strong>₹${totalInterest.toFixed(2)}</strong><br>
                                            Total Payment (Principal + Interest): <strong>₹${totalPayment.toFixed(2)}</strong>`;
                        resultDiv.style.display = 'block';
                        hideAlert();
                    };
                },

                sipCalculator: (container) => {
                    container.innerHTML = `
                        <h3>SIP Calculator</h3>
                        <p>Calculate future value of Systematic Investment Plan investments.</p>
                        <label for="monthlyInvestment">Monthly Investment (₹):</label>
                        <input type="number" id="monthlyInvestment" placeholder="e.g., 5000" min="0">
                        <label for="expectedReturnRate">Expected Annual Return Rate (%):</label>
                        <input type="number" id="expectedReturnRate" placeholder="e.g., 12" min="0" step="0.01">
                        <label for="investmentDuration">Investment Duration (years):</label>
                        <input type="number" id="investmentDuration" placeholder="e.g., 10" min="1">
                        <button id="calculateSipBtn">Calculate Future Value</button>
                        <div id="sipResult" class="result-area" style="display:none;"></div>
                    `;
                    
                    const monthlyInvestmentInput = container.querySelector('#monthlyInvestment');
                    const returnRateInput = container.querySelector('#expectedReturnRate');
                    const durationInput = container.querySelector('#investmentDuration');
                    const calculateBtn = container.querySelector('#calculateSipBtn');
                    const resultDiv = container.querySelector('#sipResult');

                    calculateBtn.onclick = () => {
                        const P = parseFloat(monthlyInvestmentInput.value);
                        const annualRate = parseFloat(returnRateInput.value);
                        const t_years = parseInt(durationInput.value);

                        if (isNaN(P) || isNaN(annualRate) || isNaN(t_years) || P <= 0 || annualRate < 0 || t_years <= 0) {
                            showAlert('Please enter valid positive numbers.', 'error');
                            resultDiv.style.display = 'none';
                            return;
                        }

                        const n = t_years * 12;
                        const i = annualRate / 12 / 100;
                        let M;

                        if (i === 0) {
                            M = P * n;
                        } else {
                            M = P * ( (Math.pow(1 + i, n) - 1) / i ) * (1 + i);
                        }
                        
                        const totalInvestment = P * n;
                        const wealthGained = M - totalInvestment;

                        resultDiv.innerHTML = `Invested Amount: <strong>₹${totalInvestment.toFixed(2)}</strong><br>
                                            Estimated Returns: <strong>₹${wealthGained.toFixed(2)}</strong><br>
                                            Total Future Value: <strong>₹${M.toFixed(2)}</strong>`;
                        resultDiv.style.display = 'block';
                        hideAlert();
                    };
                },

                qrCodeGenerator: (container) => {
                    container.innerHTML = `
                        <h3>QR Code Generator</h3>
                        <p>Generate QR codes from text or URLs.</p>
                        <label for="qrText">Text or URL for QR Code:</label>
                        <textarea id="qrText" placeholder="Enter text here"></textarea>
                        <label for="qrSize">Size (pixels):</label>
                        <input type="number" id="qrSize" value="200" min="50" max="500">
                        <button id="generateQrBtn">Generate QR Code</button>
                        <div id="qrCodeContainer" class="result-area" style="text-align:center; display:none; padding:10px; background-color:white; border-radius:var(--border-radius);"></div>
                        <button id="downloadQrBtn" style="display:none;">Download QR Code</button>
                    `;
                    
                    const textInput = container.querySelector('#qrText');
                    const sizeInput = container.querySelector('#qrSize');
                    const generateBtn = container.querySelector('#generateQrBtn');
                    const qrContainer = container.querySelector('#qrCodeContainer');
                    const downloadBtn = container.querySelector('#downloadQrBtn');

                    generateBtn.onclick = () => {
                        const text = textInput.value.trim();
                        const size = parseInt(sizeInput.value);
                        if (!text) {
                            showAlert('Please enter text or URL for the QR code.', 'error');
                            qrContainer.style.display = 'none';
                            downloadBtn.style.display = 'none';
                            return;
                        }
                        
                        qrContainer.innerHTML = '';
                        
                        try {
                            const qrCanvas = document.createElement('canvas');
                            qrContainer.appendChild(qrCanvas);
                            const ctx = qrCanvas.getContext('2d');
                            qrCanvas.width = size;
                            qrCanvas.height = size;
                            ctx.fillStyle = 'white';
                            ctx.fillRect(0, 0, size, size);
                            ctx.fillStyle = 'black';
                            ctx.font = `${size/15}px Arial`;
                            ctx.textAlign = 'center';
                            ctx.textBaseline = 'middle';
                            const lines = text.match(/.{1,20}/g) || [text];
                            lines.forEach((line, i) => {
                                ctx.fillText(line, size / 2, size / 2 - (lines.length/2 * (size/10)) + (i * (size/10)) );
                            });
                            ctx.strokeRect(size*0.1, size*0.1, size*0.8, size*0.8);
                            
                            qrContainer.style.display = 'block';
                            downloadBtn.style.display = 'inline-block';
                            showAlert('QR Code generated!', 'success');
                        } catch (e) {
                            showAlert('Error generating QR code.', 'error');
                        }
                    };

                    downloadBtn.onclick = () => {
                        const canvas = qrContainer.querySelector('canvas');
                        if (canvas) {
                            const dataURL = canvas.toDataURL('image/png');
                            const a = document.createElement('a');
                            a.href = dataURL;
                            a.download = 'qrcode.png';
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                        }
                    };
                },

                passwordGenerator: (container) => {
                    container.innerHTML = `
                        <h3>Password Generator</h3>
                        <p>Create strong, secure passwords with custom options.</p>
                        <label for="passLength">Password Length:</label>
                        <input type="number" id="passLength" value="16" min="8" max="128">
                        <div class="option-group">
                            <input type="checkbox" id="incUppercase" checked> <label for="incUppercase">Uppercase (A-Z)</label><br>
                            <input type="checkbox" id="incLowercase" checked> <label for="incLowercase">Lowercase (a-z)</label><br>
                            <input type="checkbox" id="incNumbers" checked> <label for="incNumbers">Numbers (0-9)</label><br>
                            <input type="checkbox" id="incSymbols" checked> <label for="incSymbols">Symbols (!@#$%^&*)</label>
                        </div>
                        <button id="generatePassBtn">Generate Password</button>
                        <div class="result-area" style="margin-top:1rem; display:flex; align-items:center; justify-content:space-between;">
                            <input type="text" id="generatedPassword" readonly style="flex-grow:1; margin-right:10px; background-color: var(--light); border: 1px solid rgba(0, 0, 0, 0.1); color: var(--dark); border-radius:var(--border-radius); padding:0.5rem;">
                            <button id="copyPassBtn" title="Copy to Clipboard" style="padding: 0.5em 0.8em;">📋</button>
                        </div>
                    `;
                    
                    const lengthInput = container.querySelector('#passLength');
                    const uppercaseCheck = container.querySelector('#incUppercase');
                    const lowercaseCheck = container.querySelector('#incLowercase');
                    const numbersCheck = container.querySelector('#incNumbers');
                    const symbolsCheck = container.querySelector('#incSymbols');
                    const generateBtn = container.querySelector('#generatePassBtn');
                    const passwordOutput = container.querySelector('#generatedPassword');
                    const copyBtn = container.querySelector('#copyPassBtn');

                    const charSets = {
                        uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                        lowercase: 'abcdefghijklmnopqrstuvwxyz',
                        numbers: '0123456789',
                        symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?'
                    };

                    generateBtn.onclick = () => {
                        const length = parseInt(lengthInput.value);
                        let charset = '';
                        let guaranteedChars = '';

                        if (uppercaseCheck.checked) {
                            charset += charSets.uppercase;
                            guaranteedChars += charSets.uppercase[Math.floor(Math.random() * charSets.uppercase.length)];
                        }
                        if (lowercaseCheck.checked) {
                            charset += charSets.lowercase;
                            guaranteedChars += charSets.lowercase[Math.floor(Math.random() * charSets.lowercase.length)];
                        }
                        if (numbersCheck.checked) {
                            charset += charSets.numbers;
                            guaranteedChars += charSets.numbers[Math.floor(Math.random() * charSets.numbers.length)];
                        }
                        if (symbolsCheck.checked) {
                            charset += charSets.symbols;
                            guaranteedChars += charSets.symbols[Math.floor(Math.random() * charSets.symbols.length)];
                        }

                        if (charset === '') {
                            showAlert('Please select at least one character type.', 'error');
                            passwordOutput.value = '';
                            return;
                        }

                        let password = guaranteedChars;
                        for (let i = guaranteedChars.length; i < length; i++) {
                            password += charset.charAt(Math.floor(Math.random() * charset.length));
                        }
                        
                        password = password.split('').sort(() => 0.5 - Math.random()).join('');

                        passwordOutput.value = password;
                        hideAlert();
                    };

                    copyBtn.onclick = () => {
                        if (passwordOutput.value) {
                            navigator.clipboard.writeText(passwordOutput.value)
                                .then(() => showAlert('Password copied to clipboard!', 'success'))
                                .catch(err => showAlert('Failed to copy password.', 'error'));
                        }
                    };
                },

                wordCounter: (container) => {
                    container.innerHTML = `
                        <h3>Word Counter</h3>
                        <p>Count words, characters, and estimate reading time.</p>
                        <textarea id="wcText" placeholder="Paste or type your text here..." rows="8"></textarea>
                        <div id="wcResult" class="result-area" style="margin-top:1rem;">
                            Words: <strong id="wcWords">0</strong><br>
                            Characters (with spaces): <strong id="wcCharsWithSpaces">0</strong><br>
                            Characters (no spaces): <strong id="wcCharsNoSpaces">0</strong><br>
                            Spaces: <strong id="wcSpaces">0</strong><br>
                            Sentences: <strong id="wcSentences">0</strong><br>
                            Paragraphs: <strong id="wcParagraphs">0</strong><br>
                            Reading Time: <strong id="wcReadingTime">~0 min</strong>
                        </div>
                    `;
                    
                    const textArea = container.querySelector('#wcText');
                    const wordsSpan = container.querySelector('#wcWords');
                    const charsWithSpacesSpan = container.querySelector('#wcCharsWithSpaces');
                    const charsNoSpacesSpan = container.querySelector('#wcCharsNoSpaces');
                    const spacesSpan = container.querySelector('#wcSpaces');
                    const sentencesSpan = container.querySelector('#wcSentences');
                    const paragraphsSpan = container.querySelector('#wcParagraphs');
                    const readingTimeSpan = container.querySelector('#wcReadingTime');

                    textArea.oninput = () => {
                        const text = textArea.value;
                        
                        const wordsArray = text.match(/\b[-'\w]+\b/g);
                        const words = wordsArray ? wordsArray.length : 0;
                        
                        const charsWithSpaces = text.length;
                        const charsNoSpaces = text.replace(/\s+/g, '').length;
                        const spaces = (text.match(/\s/g) || []).length;

                        const sentencesArray = text.match(/[^.!?]+[.!?]+(\s|$)/g);
                        const sentences = sentencesArray ? sentencesArray.length : (text.trim() ? 1: 0);
                        
                        const paragraphsArray = text.split(/\n\s*\n/).filter(p => p.trim() !== '');
                        const paragraphs = paragraphsArray.length || (text.trim() ? 1:0);
                        
                        const wpm = 200;
                        const readingTimeMinutes = words / wpm;
                        let readingTimeText = '';
                        if (readingTimeMinutes === 0) {
                            readingTimeText = `~0 min`;
                        } else if (readingTimeMinutes < 1) {
                            const seconds = Math.round(readingTimeMinutes * 60);
                            readingTimeText = `~${seconds} sec`;
                        } else {
                            readingTimeText = `~${Math.ceil(readingTimeMinutes)} min`;
                        }

                        wordsSpan.textContent = words;
                        charsWithSpacesSpan.textContent = charsWithSpaces;
                        charsNoSpacesSpan.textContent = charsNoSpaces;
                        spacesSpan.textContent = spaces;
                        sentencesSpan.textContent = sentences;
                        paragraphsSpan.textContent = paragraphs;
                        readingTimeSpan.textContent = readingTimeText;
                    };
                },

                base64EncoderDecoder: (container) => {
                    container.innerHTML = `
                        <h3>Base64 Encoder/Decoder</h3>
                        <p>Encode text to Base64 or decode Base64 to text.</p>
                        <textarea id="b64Input" placeholder="Enter text to encode or Base64 to decode" rows="5"></textarea>
                        <button id="b64EncodeBtn">Encode to Base64</button>
                        <button id="b64DecodeBtn">Decode from Base64</button>
                        <label for="b64Output" style="margin-top:1rem; display:block;">Result:</label>
                        <textarea id="b64Output" readonly rows="5"></textarea>
                    `;
                    
                    const inputArea = container.querySelector('#b64Input');
                    const outputArea = container.querySelector('#b64Output');
                    const encodeBtn = container.querySelector('#b64EncodeBtn');
                    const decodeBtn = container.querySelector('#b64DecodeBtn');

                    encodeBtn.onclick = () => {
                        try {
                            outputArea.value = btoa(inputArea.value);
                            hideAlert();
                        } catch (e) {
                            showAlert('Error encoding: ' + e.message, 'error');
                            outputArea.value = '';
                        }
                    };

                    decodeBtn.onclick = () => {
                        try {
                            outputArea.value = atob(inputArea.value);
                            hideAlert();
                        } catch (e) {
                            showAlert('Error decoding: Invalid Base64 string.', 'error');
                            outputArea.value = '';
                        }
                    };
                },

                colorPicker: (container) => {
                    container.innerHTML = `
                        <h3>Color Picker</h3>
                        <p>Select colors and get their values in different formats.</p>
                        <label for="htmlColorPicker">Select a Color:</label>
                        <input type="color" id="htmlColorPicker" value="#FF6B6B" style="width:100%; height: 40px; margin-bottom:1rem; border-radius:var(--border-radius);">
                        <div class="color-picker-display result-area">
                            <div id="colorPreview" class="color-preview"></div>
                            <div id="colorValues" class="color-values">
                                <p>HEX: <strong id="hexValue"></strong> <button class="copy-color-val" data-type="hex" title="Copy HEX">📋</button></p>
                                <p>RGB: <strong id="rgbValue"></strong> <button class="copy-color-val" data-type="rgb" title="Copy RGB">📋</button></p>
                                <p>HSL: <strong id="hslValue"></strong> <button class="copy-color-val" data-type="hsl" title="Copy HSL">📋</button></p>
                            </div>
                        </div>
                    `;
                    
                    const colorPickerInput = container.querySelector('#htmlColorPicker');
                    const colorPreviewDiv = container.querySelector('#colorPreview');
                    const hexValueSpan = container.querySelector('#hexValue');
                    const rgbValueSpan = container.querySelector('#rgbValue');
                    const hslValueSpan = container.querySelector('#hslValue');
                    const copyButtons = container.querySelectorAll('.copy-color-val');

                    function updateColorValues(hex) {
                        colorPreviewDiv.style.backgroundColor = hex;
                        hexValueSpan.textContent = hex;

                        // Convert HEX to RGB
                        const r = parseInt(hex.slice(1, 3), 16);
                        const g = parseInt(hex.slice(3, 5), 16);
                        const b = parseInt(hex.slice(5, 7), 16);
                        rgbValueSpan.textContent = `rgb(${r}, ${g}, ${b})`;

                        // Convert RGB to HSL
                        const rNormalized = r / 255;
                        const gNormalized = g / 255;
                        const bNormalized = b / 255;
                        
                        const max = Math.max(rNormalized, gNormalized, bNormalized);
                        const min = Math.min(rNormalized, gNormalized, bNormalized);
                        let h, s, l = (max + min) / 2;

                        if (max === min) {
                            h = s = 0;
                        } else {
                            const d = max - min;
                            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                            switch (max) {
                                case rNormalized: h = (gNormalized - bNormalized) / d + (gNormalized < bNormalized ? 6 : 0); break;
                                case gNormalized: h = (bNormalized - rNormalized) / d + 2; break;
                                case bNormalized: h = (rNormalized - gNormalized) / d + 4; break;
                            }
                            h /= 6;
                        }

                        hslValueSpan.textContent = `hsl(${Math.round(h * 360)}, ${Math.round(s * 100)}%, ${Math.round(l * 100)}%)`;
                    }

                    colorPickerInput.oninput = (e) => {
                        updateColorValues(e.target.value);
                    };
                    
                    copyButtons.forEach(btn => {
                        btn.onclick = () => {
                            const type = btn.dataset.type;
                            let valueToCopy;
                            if (type === 'hex') valueToCopy = colorPickerInput.value;
                            else if (type === 'rgb') valueToCopy = rgbValueSpan.textContent;
                            else if (type === 'hsl') valueToCopy = hslValueSpan.textContent;

                            navigator.clipboard.writeText(valueToCopy)
                                .then(() => showAlert(`${type.toUpperCase()} value copied!`, 'success'))
                                .catch(() => showAlert('Failed to copy.', 'error'));
                        };
                    });

                    updateColorValues(colorPickerInput.value);
                },

                textToSpeech: (container) => {
                    container.innerHTML = `
                        <h3>Text to Speech</h3>
                        <p>Convert text into spoken audio using browser voices.</p>
                        <textarea id="ttsText" placeholder="Enter text to speak..." rows="6"></textarea>
                        <div class="option-group">
                            <label for="ttsVoice">Voice:</label>
                            <select id="ttsVoice"></select>
                            <label for="ttsRate" style="margin-left:10px;">Rate: <span id="ttsRateVal">1</span></label>
                            <input type="range" id="ttsRate" min="0.5" max="2" value="1" step="0.1" style="vertical-align: middle;">
                            <label for="ttsPitch" style="margin-left:10px;">Pitch: <span id="ttsPitchVal">1</span></label>
                            <input type="range" id="ttsPitch" min="0" max="2" value="1" step="0.1" style="vertical-align: middle;">
                        </div>
                        <button id="ttsSpeakBtn">Speak</button>
                        <button id="ttsStopBtn">Stop</button>
                    `;
                    
                    const textInput = container.querySelector('#ttsText');
                    const voiceSelect = container.querySelector('#ttsVoice');
                    const rateInput = container.querySelector('#ttsRate');
                    const pitchInput = container.querySelector('#ttsPitch');
                    const rateValSpan = container.querySelector('#ttsRateVal');
                    const pitchValSpan = container.querySelector('#ttsPitchVal');
                    const speakBtn = container.querySelector('#ttsSpeakBtn');
                    const stopBtn = container.querySelector('#ttsStopBtn');

                    const synth = window.speechSynthesis;
                    if (!synth) {
                        container.innerHTML = "<p>Sorry, your browser doesn't support Text to Speech.</p>";
                        return;
                    }

                    function populateVoiceList() {
                        const voices = synth.getVoices();
                        voiceSelect.innerHTML = '';
                        voices.forEach(voice => {
                            const option = document.createElement('option');
                            option.textContent = `${voice.name} (${voice.lang})`;
                            option.value = voice.name;
                            voiceSelect.appendChild(option);
                        });
                    }

                    populateVoiceList();
                    if (synth.onvoiceschanged !== undefined) {
                        synth.onvoiceschanged = populateVoiceList;
                    }
                    
                    rateInput.oninput = () => rateValSpan.textContent = rateInput.value;
                    pitchInput.oninput = () => pitchValSpan.textContent = pitchInput.value;

                    speakBtn.onclick = () => {
                        if (synth.speaking) {
                            synth.cancel();
                        }
                        if (textInput.value.trim() !== '') {
                            const utterance = new SpeechSynthesisUtterance(textInput.value.trim());
                            utterance.rate = parseFloat(rateInput.value);
                            utterance.pitch = parseFloat(pitchInput.value);
                            synth.speak(utterance);
                            showAlert('Speaking...', 'info');
                        } else {
                            showAlert('Please enter some text to speak.', 'error');
                        }
                    };

                    stopBtn.onclick = () => {
                        synth.cancel();
                        showAlert('Speech stopped.', 'info');
                    };
                },

                speechToText: (container) => {
                    container.innerHTML = `
                        <h3>Speech to Text</h3>
                        <p>Convert your voice to text using your microphone.</p>
                        <button id="sttStartBtn">Start Listening</button>
                        <button id="sttStopBtn" disabled>Stop Listening</button>
                        <textarea id="sttOutput" placeholder="Transcript will appear here..." readonly rows="6"></textarea>
                    `;
                    
                    const startBtn = container.querySelector('#sttStartBtn');
                    const stopBtn = container.querySelector('#sttStopBtn');
                    const outputArea = container.querySelector('#sttOutput');

                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    if (!SpeechRecognition) {
                        container.innerHTML = '<p>Speech Recognition is not supported in your browser.</p>';
                        return;
                    }

                    const recognition = new SpeechRecognition();
                    recognition.continuous = true;
                    recognition.interimResults = true;

                    recognition.onstart = () => {
                        startBtn.disabled = true;
                        stopBtn.disabled = false;
                        showAlert('Listening... Speak now.', 'info');
                    };

                    recognition.onresult = (event) => {
                        let transcript = '';
                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            transcript += event.results[i][0].transcript;
                        }
                        outputArea.value = transcript;
                    };

                    recognition.onend = () => {
                        startBtn.disabled = false;
                        stopBtn.disabled = true;
                        showAlert('Stopped listening.', 'info');
                    };

                    startBtn.onclick = () => {
                        recognition.start();
                    };

                    stopBtn.onclick = () => {
                        recognition.stop();
                    };
                },

                jsonFormatter: (container) => {
                    container.innerHTML = `
                        <h3>JSON Formatter</h3>
                        <p>Format and validate JSON data.</p>
                        <textarea id="jsonInput" placeholder="Paste your JSON data here..." rows="7"></textarea>
                        <div style="display:flex; align-items:center; margin-bottom:1rem;">
                            <label for="jsonSpaces" style="margin-right:10px; margin-bottom:0;">Indentation:</label>
                            <select id="jsonSpaces" style="width:auto; margin-bottom:0;">
                                <option value="2">2 Spaces</option>
                                <option value="4" selected>4 Spaces</option>
                                <option value="tab">Tabs</option>
                            </select>
                            <button id="formatJsonBtn" style="margin-left:auto;">Format JSON</button>
                        </div>
                        <label for="jsonOutput" style="display:block; margin-bottom:0.5rem;">Formatted JSON:
                            <button id="copyJsonBtn" style="float:right; padding:0.3em 0.6em; margin-top:-5px;">Copy</button>
                        </label>
                        <textarea id="jsonOutput" readonly rows="7"></textarea>
                    `;
                    
                    const inputArea = container.querySelector('#jsonInput');
                    const outputArea = container.querySelector('#jsonOutput');
                    const formatBtn = container.querySelector('#formatJsonBtn');
                    const copyBtn = container.querySelector('#copyJsonBtn');
                    const spacesSelect = container.querySelector('#jsonSpaces');

                    formatBtn.onclick = () => {
                        const jsonString = inputArea.value.trim();
                        if (!jsonString) {
                            showAlert('Input is empty. Paste some JSON data.', 'info');
                            outputArea.value = '';
                            return;
                        }
                        try {
                            const jsonObj = JSON.parse(jsonString);
                            const spacesOption = spacesSelect.value;
                            let indent;
                            if (spacesOption === 'tab') {
                                indent = '\t';
                            } else {
                                indent = parseInt(spacesOption);
                            }
                            outputArea.value = JSON.stringify(jsonObj, null, indent);
                            showAlert('JSON formatted successfully!', 'success');
                        } catch (e) {
                            outputArea.value = 'Error: Invalid JSON\n\n' + e.message;
                            showAlert('Invalid JSON: ' + e.message, 'error');
                        }
                    };

                    copyBtn.onclick = () => {
                        if (outputArea.value) {
                            navigator.clipboard.writeText(outputArea.value)
                                .then(() => showAlert('Formatted JSON copied!', 'success'))
                                .catch(err => showAlert('Failed to copy.', 'error'));
                        }
                    };
                },

                unitConverter: (container) => {
                    container.innerHTML = `
                        <h3>Unit Converter</h3>
                        <p>Convert between different units of measurement.</p>
                        <label for="ucCategory">Category:</label>
                        <select id="ucCategory">
                            <option value="length">Length</option>
                            <option value="weight">Weight</option>
                            <option value="temperature">Temperature</option>
                        </select>
                        <div style="display:flex; gap:10px; margin-top:10px; align-items:flex-end;">
                            <div style="flex:2">
                                <label for="ucInputValue">Value:</label>
                                <input type="number" id="ucInputValue" value="1">
                            </div>
                            <div style="flex:3">
                                <label for="ucFromUnit">From:</label>
                                <select id="ucFromUnit"></select>
                            </div>
                            <div style="font-size:1.5rem; padding-bottom:0.5rem;">⇄</div>
                            <div style="flex:3">
                                <label for="ucToUnit">To:</label>
                                <select id="ucToUnit"></select>
                            </div>
                        </div>
                        <div id="ucResult" class="result-area" style="margin-top:1rem; font-weight:bold; font-size:1.2rem; text-align:center;">Enter values and see result here</div>
                    `;
                    
                    const categorySelect = container.querySelector('#ucCategory');
                    const fromUnitSelect = container.querySelector('#ucFromUnit');
                    const toUnitSelect = container.querySelector('#ucToUnit');
                    const valueInput = container.querySelector('#ucInputValue');
                    const resultDiv = container.querySelector('#ucResult');

                    const units = {
                        length: {
                            meter: 1,
                            kilometer: 1000,
                            centimeter: 0.01,
                            millimeter: 0.001,
                            mile: 1609.34,
                            yard: 0.9144,
                            foot: 0.3048,
                            inch: 0.0254
                        },
                        weight: {
                            kilogram: 1,
                            gram: 0.001,
                            pound: 0.453592,
                            ounce: 0.0283495
                        },
                        temperature: {
                            celsius: 'celsius',
                            fahrenheit: 'fahrenheit',
                            kelvin: 'kelvin'
                        }
                    };

                    function populateUnitOptions(category) {
                        fromUnitSelect.innerHTML = '';
                        toUnitSelect.innerHTML = '';
                        
                        Object.keys(units[category]).forEach(unit => {
                            const fromOption = document.createElement('option');
                            fromOption.value = unit;
                            fromOption.textContent = unit.charAt(0).toUpperCase() + unit.slice(1);
                            fromUnitSelect.appendChild(fromOption);
                            
                            const toOption = document.createElement('option');
                            toOption.value = unit;
                            toOption.textContent = unit.charAt(0).toUpperCase() + unit.slice(1);
                            toUnitSelect.appendChild(toOption);
                        });
                        
                        // Set different default to/from units
                        if (Object.keys(units[category]).length > 1) {
                            toUnitSelect.selectedIndex = 1;
                        }
                    }

                    function convertUnits() {
                        const category = categorySelect.value;
                        const fromUnit = fromUnitSelect.value;
                        const toUnit = toUnitSelect.value;
                        const inputValue = parseFloat(valueInput.value);

                        if (isNaN(inputValue)) {
                            resultDiv.textContent = 'Invalid input value';
                            return;
                        }

                        let result;
                        
                        if (category === 'temperature') {
                            // Temperature conversions
                            if (fromUnit === 'celsius' && toUnit === 'fahrenheit') {
                                result = (inputValue * 9/5) + 32;
                            } else if (fromUnit === 'celsius' && toUnit === 'kelvin') {
                                result = inputValue + 273.15;
                            } else if (fromUnit === 'fahrenheit' && toUnit === 'celsius') {
                                result = (inputValue - 32) * 5/9;
                            } else if (fromUnit === 'fahrenheit' && toUnit === 'kelvin') {
                                result = (inputValue - 32) * 5/9 + 273.15;
                            } else if (fromUnit === 'kelvin' && toUnit === 'celsius') {
                                result = inputValue - 273.15;
                            } else if (fromUnit === 'kelvin' && toUnit === 'fahrenheit') {
                                result = (inputValue - 273.15) * 9/5 + 32;
                            } else {
                                result = inputValue; // Same unit
                            }
                        } else {
                            // Other conversions
                            const fromFactor = units[category][fromUnit];
                            const toFactor = units[category][toUnit];
                            result = inputValue * fromFactor / toFactor;
                        }

                        resultDiv.textContent = `${inputValue} ${fromUnit} = ${result.toFixed(4)} ${toUnit}`;
                    }

                    categorySelect.onchange = () => {
                        populateUnitOptions(categorySelect.value);
                        convertUnits();
                    };

                    [fromUnitSelect, toUnitSelect, valueInput].forEach(element => {
                        element.onchange = convertUnits;
                        element.oninput = convertUnits;
                    });

                    // Initialize
                    populateUnitOptions('length');
                    convertUnits();
                },

                bmiCalculator: (container) => {
                    container.innerHTML = `
                        <h3>BMI Calculator</h3>
                        <p>Calculate your Body Mass Index and category.</p>
                        <label for="bmiWeight">Weight (kg):</label>
                        <input type="number" id="bmiWeight" placeholder="e.g., 70" min="0">
                        <label for="bmiHeight">Height (cm):</label>
                        <input type="number" id="bmiHeight" placeholder="e.g., 175" min="0">
                        <button id="calculateBmiBtn">Calculate BMI</button>
                        <div id="bmiResult" class="result-area" style="display:none; text-align:center;"></div>
                    `;
                    
                    const weightInput = container.querySelector('#bmiWeight');
                    const heightInput = container.querySelector('#bmiHeight');
                    const calculateBtn = container.querySelector('#calculateBmiBtn');
                    const resultDiv = container.querySelector('#bmiResult');

                    calculateBtn.onclick = () => {
                        const weight = parseFloat(weightInput.value);
                        const heightCm = parseFloat(heightInput.value);

                        if (isNaN(weight) || isNaN(heightCm) || weight <= 0 || heightCm <= 0) {
                            showAlert('Please enter valid positive numbers for weight and height.', 'error');
                            resultDiv.style.display = 'none';
                            return;
                        }
                        
                        const heightM = heightCm / 100;
                        const bmi = weight / (heightM * heightM);
                        let category = '';
                        let color = 'var(--dark)';

                        if (bmi < 18.5) { 
                            category = 'Underweight'; 
                            color = '#3498db'; 
                        } else if (bmi < 24.9) { 
                            category = 'Normal weight'; 
                            color = '#2ecc71'; 
                        } else if (bmi < 29.9) { 
                            category = 'Overweight'; 
                            color = '#f1c40f'; 
                        } else if (bmi < 34.9) { 
                            category = 'Obesity Class I'; 
                            color = '#e67e22'; 
                        } else if (bmi < 39.9) { 
                            category = 'Obesity Class II'; 
                            color = '#e74c3c'; 
                        } else { 
                            category = 'Obesity Class III (Severe)'; 
                            color = '#c0392b'; 
                        }

                        resultDiv.innerHTML = `Your BMI: <strong style="font-size:1.5em;">${bmi.toFixed(2)}</strong><br>
                                            Category: <strong style="color:${color};">${category}</strong>`;
                        resultDiv.style.display = 'block';
                        hideAlert();
                    };
                },

                timerStopwatch: (container) => {
                    container.innerHTML = `
                        <h3>Timer & Stopwatch</h3>
                        <p>Simple timer and stopwatch functionality.</p>
                        <div class="tabs">
                            <button class="tab-button active" data-tab="timerTab">Timer</button>
                            <button class="tab-button" data-tab="stopwatchTab">Stopwatch</button>
                        </div>

                        <div id="timerTab" class="tab-content" style="padding-top:1rem;">
                            <div style="display:flex; justify-content:space-around; margin-bottom:1rem;">
                                <div><label for="timerHours">Hours:</label><br><input type="number" id="timerHours" min="0" max="99" value="0" style="width:60px;"></div>
                                <div><label for="timerMinutes">Mins:</label><br><input type="number" id="timerMinutes" min="0" max="59" value="5" style="width:60px;"></div>
                                <div><label for="timerSeconds">Secs:</label><br><input type="number" id="timerSeconds" min="0" max="59" value="0" style="width:60px;"></div>
                            </div>
                            <div class="timer-display" id="timerDisplay">00:05:00</div>
                            <div style="text-align:center;">
                                <button id="timerStart">Start</button>
                                <button id="timerPause" disabled>Pause</button>
                                <button id="timerReset">Reset</button>
                            </div>
                        </div>

                        <div id="stopwatchTab" class="tab-content" style="display:none; padding-top:1rem;">
                            <div class="stopwatch-display" id="stopwatchDisplay">00:00:00.00</div>
                            <div style="text-align:center; margin-bottom:1rem;">
                                <button id="stopwatchStart">Start</button>
                                <button id="stopwatchStop" disabled>Stop</button>
                                <button id="stopwatchReset" disabled>Reset</button>
                                <button id="stopwatchLap" disabled>Lap</button>
                            </div>
                            <ul id="lapsList" class="laps-list"></ul>
                        </div>
                    `;
                    
                    // Tab functionality
                    const tabButtons = container.querySelectorAll('.tab-button');
                    const tabContents = container.querySelectorAll('.tab-content');
                    
                    tabButtons.forEach(button => {
                        button.onclick = () => {
                            tabButtons.forEach(btn => btn.classList.remove('active'));
                            button.classList.add('active');
                            tabContents.forEach(content => content.style.display = 'none');
                            container.querySelector(`#${button.dataset.tab}`).style.display = 'block';
                        };
                    });

                    // Timer functionality
                    const timerHoursInput = container.querySelector('#timerHours');
                    const timerMinutesInput = container.querySelector('#timerMinutes');
                    const timerSecondsInput = container.querySelector('#timerSeconds');
                    const timerDisplay = container.querySelector('#timerDisplay');
                    const timerStartBtn = container.querySelector('#timerStart');
                    const timerPauseBtn = container.querySelector('#timerPause');
                    const timerResetBtn = container.querySelector('#timerReset');
                    
                    let timerInterval;
                    let timerTotalSeconds = 300; // 5 minutes default
                    let timerRunning = false;

                    function updateTimerDisplay() {
                        const hours = Math.floor(timerTotalSeconds / 3600);
                        const minutes = Math.floor((timerTotalSeconds % 3600) / 60);
                        const seconds = timerTotalSeconds % 60;
                        
                        timerDisplay.textContent = 
                            `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    }

                    function setTimerFromInputs() {
                        const hours = parseInt(timerHoursInput.value) || 0;
                        const minutes = parseInt(timerMinutesInput.value) || 0;
                        const seconds = parseInt(timerSecondsInput.value) || 0;
                        
                        timerTotalSeconds = hours * 3600 + minutes * 60 + seconds;
                        updateTimerDisplay();
                    }

                    [timerHoursInput, timerMinutesInput, timerSecondsInput].forEach(input => {
                        input.onchange = setTimerFromInputs;
                        input.oninput = setTimerFromInputs;
                    });

                    timerStartBtn.onclick = () => {
                        if (timerRunning) return;
                        
                        if (timerTotalSeconds <= 0) {
                            showAlert('Please set a timer duration greater than 0.', 'error');
                            return;
                        }
                        
                        timerRunning = true;
                        timerStartBtn.disabled = true;
                        timerPauseBtn.disabled = false;
                        
                        timerInterval = setInterval(() => {
                            if (timerTotalSeconds > 0) {
                                timerTotalSeconds--;
                                updateTimerDisplay();
                            } else {
                                clearInterval(timerInterval);
                                timerRunning = false;
                                timerStartBtn.disabled = false;
                                timerPauseBtn.disabled = true;
                                showAlert('Timer finished!', 'success');
                                // Play a sound if possible
                                try {
                                    new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA').play();
                                } catch(e) {}
                            }
                        }, 1000);
                    };

                    timerPauseBtn.onclick = () => {
                        clearInterval(timerInterval);
                        timerRunning = false;
                        timerStartBtn.disabled = false;
                        timerPauseBtn.disabled = true;
                    };

                    timerResetBtn.onclick = () => {
                        clearInterval(timerInterval);
                        timerRunning = false;
                        timerStartBtn.disabled = false;
                        timerPauseBtn.disabled = true;
                        setTimerFromInputs();
                    };

                    // Stopwatch functionality
                    const stopwatchDisplay = container.querySelector('#stopwatchDisplay');
                    const stopwatchStartBtn = container.querySelector('#stopwatchStart');
                    const stopwatchStopBtn = container.querySelector('#stopwatchStop');
                    const stopwatchResetBtn = container.querySelector('#stopwatchReset');
                    const stopwatchLapBtn = container.querySelector('#stopwatchLap');
                    const lapsList = container.querySelector('#lapsList');
                    
                    let stopwatchInterval;
                    let stopwatchStartTime;
                    let stopwatchElapsed = 0;
                    let stopwatchRunning = false;
                    let lapCount = 1;

                    function updateStopwatchDisplay() {
                        const totalSeconds = stopwatchElapsed / 1000;
                        const hours = Math.floor(totalSeconds / 3600);
                        const minutes = Math.floor((totalSeconds % 3600) / 60);
                        const seconds = totalSeconds % 60;
                        const milliseconds = Math.floor((stopwatchElapsed % 1000) / 10);
                        
                        stopwatchDisplay.textContent = 
                            `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}.${String(milliseconds).padStart(2, '0')}`;
                    }

                    stopwatchStartBtn.onclick = () => {
                        if (stopwatchRunning) return;
                        
                        stopwatchRunning = true;
                        stopwatchStartTime = Date.now() - stopwatchElapsed;
                        stopwatchStartBtn.disabled = true;
                        stopwatchStopBtn.disabled = false;
                        stopwatchResetBtn.disabled = false;
                        stopwatchLapBtn.disabled = false;
                        
                        stopwatchInterval = setInterval(() => {
                            stopwatchElapsed = Date.now() - stopwatchStartTime;
                            updateStopwatchDisplay();
                        }, 10);
                    };

                    stopwatchStopBtn.onclick = () => {
                        clearInterval(stopwatchInterval);
                        stopwatchRunning = false;
                        stopwatchStartBtn.disabled = false;
                        stopwatchStopBtn.disabled = true;
                    };

                    stopwatchResetBtn.onclick = () => {
                        clearInterval(stopwatchInterval);
                        stopwatchRunning = false;
                        stopwatchElapsed = 0;
                        lapCount = 1;
                        updateStopwatchDisplay();
                        lapsList.innerHTML = '';
                        stopwatchStartBtn.disabled = false;
                        stopwatchStopBtn.disabled = true;
                        stopwatchResetBtn.disabled = true;
                        stopwatchLapBtn.disabled = true;
                    };

                    stopwatchLapBtn.onclick = () => {
                        const lapTime = stopwatchDisplay.textContent;
                        const lapItem = document.createElement('li');
                        lapItem.textContent = `Lap ${lapCount}: ${lapTime}`;
                        lapsList.appendChild(lapItem);
                        lapCount++;
                    };

                    // Initialize displays
                    updateTimerDisplay();
                    updateStopwatchDisplay();
                }
            };
        });
    </script>
</body>
</html>
